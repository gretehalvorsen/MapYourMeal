@model MapYourMeal.ViewModels.ReviewsViewModel

@{
    ViewData["Title"] = "My Page";
    int index = 1;  // Manual index tracking
}

<div class="container mt-5">
    <div class="row">
        <!-- Left Section: User Reviews -->
        <div class="col-md-6">
            <h3>My Reviews</h3>
            @foreach (var review in Model.Reviews)
            {
                <div class="row mb-4 p-3" style="border: 2px solid black;">
                    <!-- Review Image -->
                    <div class="col-3">
                        <img src="@review.ImageUrl" alt="@review.Dish" class="img-fluid rounded" style="width: 100px; height: 100px;">
                    </div>

                    <!-- Review Details -->
                    <div class="col-6">
                        <h5><strong>@index. @review.Restaurant?.RestaurantName</strong></h5>
                        <p><strong>Dish:</strong> @review.Dish</p>
                        <div>
                            <!-- Display rating with filled and unfilled stars -->
                            @for (var i = 1; i <= 5; i++)
                            {
                                if (i <= review.Rating)
                                {
                                    <span class="text-dark">★</span>
                                }
                                else
                                {
                                    <span class="text-muted">★</span>
                                }
                            }
                        </div>
                        <p><strong>Notes:</strong> @review.Note</p>
                        <p>
                            <!-- Dietary requirements -->
                            <strong>Requirements:</strong> 
                            @(review.IsGlutenFree ? "Gluten-Free " : "")
                            @(review.IsVegan ? "Vegan " : "")
                            @(review.IsDairyFree ? "Dairy-Free" : "")
                        </p>
                    </div>

                    <!-- Action Buttons for Edit and Delete -->
                    <div class="col-3 text-end">
                        <a href="@Url.Action("Update", "Review", new { ReviewId = review.ReviewId })" class="btn btn-primary btn-sm mb-2">Edit</a>
                        <a href="@Url.Action("Delete", "Review", new { ReviewId = review.ReviewId })" class="btn btn-danger btn-sm">Delete</a>
                    </div>
                </div>
                index++;
            }
        </div>

        <!-- Right Section: User Info -->
        <div class="col-md-6">
            <div class="user-info p-4" style="border: 2px solid black;">
                <h3>My Information</h3>
                <div class="mt-3">
                    <strong>Username:</strong> @User.Identity.Name
                </div>
                <div class="mt-3">
                    <strong>Email:</strong> user@example.com
                </div>
                <div class="mt-3">
                    <strong>Password:</strong> ********
                </div>
                <!-- Optional edit button if needed -->
                <a href="@Url.Action("EditProfile", "Account")" class="btn btn-primary mt-3">Edit Profile</a>
            </div>
        </div>
    </div>
</div>
